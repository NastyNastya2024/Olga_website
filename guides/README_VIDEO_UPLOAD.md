# Загрузка видео с Яндекс Диска в S3

## Способ 1: Ручное скачивание и загрузка (рекомендуется)

### Шаг 1: Скачать видео с Яндекс Диска

1. Откройте ссылку: https://disk.yandex.ru/d/piDW3EhXQ8n46Q
2. Выберите нужные видео файлы
3. Нажмите "Скачать" или "Скачать всё"
4. Сохраните файлы в папку на вашем компьютере (например, `./downloads`)

### Шаг 2: Загрузить видео в S3

#### Вариант A: Один файл

```bash
cd backend
node ../scripts/upload-to-s3.js /path/to/video.mp4
```

#### Вариант B: Вся папка

```bash
cd backend
node ../scripts/upload-to-s3.js /path/to/downloads/folder
```

Скрипт автоматически:
- Найдет все видео файлы (.mp4, .webm, .mov, .avi, .mkv)
- Загрузит их в S3 в папку `videos/`
- Покажет URL для каждого загруженного файла

### Шаг 3: Проверить загруженные файлы

Откройте MinIO Console: http://localhost:9001
- Войдите: `minioadmin` / `minioadmin`
- Перейдите в bucket `olga-media`
- Проверьте папку `videos/`

## Способ 2: Автоматическое скачивание через API (требует токен)

### Шаг 1: Получить токен Яндекс Диска

1. Перейдите: https://oauth.yandex.ru/
2. Создайте приложение
3. Получите токен доступа

### Шаг 2: Установить зависимости

```bash
npm install yandex-disk
```

### Шаг 3: Скачать файлы

```bash
node scripts/download-yandex-disk.js YOUR_TOKEN ./downloads
```

### Шаг 4: Загрузить в S3

```bash
cd backend
node ../scripts/upload-to-s3.js ../downloads
```

## Способ 3: Через веб-интерфейс админки

После загрузки видео в S3, вы можете добавить их в базу данных через админ-панель:

1. Откройте админку: `admin/index.html`
2. Перейдите в раздел "Видео"
3. Нажмите "Добавить видео"
4. Вставьте URL из S3 в поле "URL видео"

## Структура в S3

Видео будут сохранены в следующей структуре:

```
olga-media/
└── videos/
    ├── 1234567890-video1.mp4
    ├── 1234567891-video2.mp4
    └── ...
```

## Получение публичного URL

После загрузки скрипт покажет URL файла. Также можно получить URL так:

```javascript
const url = `http://localhost:9000/olga-media/videos/filename.mp4`;
```

## Примечания

- Убедитесь, что MinIO запущен: `docker-compose up -d minio`
- Убедитесь, что backend настроен правильно (файл `.env` в папке `backend`)
- Большие файлы могут загружаться долго - дождитесь завершения
- Проверьте свободное место на диске перед загрузкой
