# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ —Å –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞ –≤ S3

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–∫–∞—á–∞–π—Ç–µ –≤–∏–¥–µ–æ —Å –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞ –≤—Ä—É—á–Ω—É—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://disk.yandex.ru/d/piDW3EhXQ8n46Q
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã (–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ "–°–∫–∞—á–∞—Ç—å –≤—Å—ë")
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –ø–∞–ø–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä: `~/Downloads/yoga-videos`

### 2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MinIO –∑–∞–ø—É—â–µ–Ω

```bash
docker-compose up -d minio
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: http://localhost:9001 (minioadmin/minioadmin)

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)

```bash
cd backend
npm install
```

### 4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ –≤ S3

#### –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:
```bash
node ../scripts/upload-to-s3.js ~/Downloads/yoga-videos/video1.mp4
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –≤–∏–¥–µ–æ –∏–∑ –ø–∞–ø–∫–∏:
```bash
node ../scripts/upload-to-s3.js ~/Downloads/yoga-videos
```

### 5. –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- üìç URL —Ñ–∞–π–ª–∞ –≤ S3
- üîë Key —Ñ–∞–π–ª–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: video1.mp4
   URL: http://localhost:9000/olga-media/videos/1234567890-video1.mp4
   Key: videos/1234567890-video1.mp4
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ URL –≤ –∞–¥–º–∏–Ω–∫–µ

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ –≤ S3:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É: `admin/index.html`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–í–∏–¥–µ–æ"
3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ"
4. –í—Å—Ç–∞–≤—å—Ç–µ URL –∏–∑ –≤—ã–≤–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞ –≤ –ø–æ–ª–µ "URL –≤–∏–¥–µ–æ"

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```bash
curl -X POST http://localhost:5000/api/upload \
  -F "file=@/path/to/video.mp4"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ß–µ—Ä–µ–∑ MinIO Console:
1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:9001
2. –í–æ–π–¥–∏—Ç–µ: `minioadmin` / `minioadmin`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ bucket `olga-media` ‚Üí –ø–∞–ø–∫–∞ `videos/`

### –ß–µ—Ä–µ–∑ API:
```bash
curl http://localhost:5000/api/upload/list?prefix=videos/
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ S3

```
olga-media/
‚îî‚îÄ‚îÄ videos/
    ‚îú‚îÄ‚îÄ 1234567890-–ô–æ–≥–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö.mp4
    ‚îú‚îÄ‚îÄ 1234567891-–î–ª–∏–Ω–Ω—ã–µ –≤–∏–¥–µ–æ.mp4
    ‚îî‚îÄ‚îÄ ...
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- ‚úÖ –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –í—Å–µ –≤–∏–¥–µ–æ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—É–±–ª–∏—á–Ω–æ –ø–æ URL
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MinIO –∑–∞–ø—É—â–µ–Ω –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ

## Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ S3
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MinIO –∑–∞–ø—É—â–µ–Ω: `docker-compose ps`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 9000: `curl http://localhost:9000/minio/health/live`

### –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs minio`
