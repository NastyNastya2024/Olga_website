# Админ-панель - SPA приложение

## Структура

Админка теперь является Single Page Application (SPA) с одним `index.html` и роутингом на JavaScript.

```
admin/
├── index.html              # Единственная точка входа
├── scripts/
│   ├── app.js             # Главный файл приложения
│   ├── router.js          # Роутер для навигации
│   ├── guards.js          # Guards для проверки доступа
│   └── pages/             # Компоненты страниц
│       ├── videos.js
│       ├── students.js
│       ├── tours.js
│       └── blog.js
└── styles/
    ├── admin.css
    └── modal.css
```

## Особенности

### 1. Единая точка входа
- Один `index.html` файл
- Все страницы загружаются динамически через роутер

### 2. Роутинг
- Клиентский роутинг на JavaScript
- Поддержка History API
- Автоматическое обновление URL без перезагрузки страницы

### 3. Guards (защита маршрутов)
- `authGuard` - проверка авторизации
- `adminGuard` - проверка роли админа
- `guestGuard` - редирект если уже авторизован

### 4. Общий Layout
- Единый layout для всех страниц
- Sidebar с навигацией (скрывает пункты для не-админов)
- Header с информацией о пользователе

### 5. Разделение доступа
- Обычные пользователи видят только доступные разделы
- Админы видят все разделы
- Проверка прав на уровне фронтенда и бэкенда

## Использование

### Навигация

```javascript
// Программная навигация
router.navigate('/videos');

// Через ссылки
<a href="#" data-route="/videos">Видео</a>
```

### Добавление новой страницы

1. Создайте компонент в `scripts/pages/new-page.js`:

```javascript
export default {
    render: async () => {
        return `<div>Контент страницы</div>`;
    },
    init: async () => {
        // Инициализация страницы
    }
};
```

2. Зарегистрируйте маршрут в `app.js`:

```javascript
router.route('/new-page', async () => {
    const NewPage = await import('./pages/new-page.js');
    const content = await NewPage.default.render();
    return Layout.render() + content;
}, [authGuard, adminGuard]); // guards опциональны
```

## Маршруты

- `/` или `/login` - Страница входа (только для неавторизованных)
- `/dashboard` - Дашборд (требует авторизации)
- `/videos` - Управление видео (требует авторизации)
- `/students` - Управление учениками (требует авторизации)
- `/tours` - Управление турами (требует авторизации и роли админа)
- `/blog` - Управление блогом (требует авторизации и роли админа)
- `/403` - Доступ запрещен
- `/404` - Страница не найдена

## Преимущества SPA подхода

1. ✅ Единый layout - нет дублирования кода
2. ✅ Глобальное состояние - информация о пользователе доступна везде
3. ✅ Guards на фронтенде - пользователь не видит недоступные разделы
4. ✅ Быстрая навигация - без перезагрузки страницы
5. ✅ Лучший UX - плавные переходы между страницами
